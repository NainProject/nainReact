(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{8664:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/interview",function(){return r(3101)}])},3101:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(5893),s=r(7294),c=r(4851),a=()=>{let e=(0,s.useRef)(null);(0,s.useRef)(null);let[t,r]=(0,s.useState)(!1),[c,a]=(0,s.useState)(null),[i,o]=(0,s.useState)(null),l=async()=>{try{let t=await navigator.mediaDevices.getUserMedia({video:!0});e.current&&(e.current.srcObject=t,a(t)),r(!0)}catch(e){console.error("Error accessing webcam: ",e)}},u=async e=>{try{let t=await fetch("http://127.0.0.1:8080/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({frame:e}),ivtNo:1}),r=await t.json();o("data:video/mp4;base64,".concat(r.processedImage))}catch(e){console.error("Error sending frame to server: ",e)}};(0,s.useEffect)(()=>{if(t&&e.current){let t=setInterval(()=>{let t=document.createElement("canvas");t.width=e.current.videoWidth,t.height=e.current.videoHeight,t.getContext("2d").drawImage(e.current,0,0,t.width,t.height),u(t.toDataURL("image/jpeg"))},1e3);return()=>clearInterval(t)}},[t]),(0,s.useEffect)(()=>()=>{c&&c.getTracks().forEach(e=>e.stop())},[c]);let d=async()=>{try{let e=await fetch("http://127.0.0.1:8080/stop",{method:"GET"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();console.log("Server response:",t)}catch(e){console.error("Error sending frame to server: ",e)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{children:"Webcam 화면"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:t?()=>{e.current&&(e.current.srcObject=null),c&&c.getTracks().forEach(e=>e.stop()),r(!1)}:l,children:t?"카메라 끄기":"카메라 켜기"}),(0,n.jsx)("button",{onClick:d,disabled:i,children:"영상저장"})]}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)("video",{ref:e,autoPlay:!0,playsInline:!0}),(0,n.jsx)("div",{children:i&&(0,n.jsx)("img",{src:i,alt:"Processed"})})]})]})},i=(0,c.Pi)(()=>(0,n.jsx)("div",{className:"map_div",children:(0,n.jsx)(a,{})}))}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8664)}),_N_E=e.O()}]);